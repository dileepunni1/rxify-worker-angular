{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/app.component.html","./src/app/app.worker.ts","./src/app/app.component.scss","./src/app/app.component.ts","./src/app/app.module.ts","./src/app/worker-utils/rxify-worker.ts","./src/environments/environment.ts","./src/main.ts"],"names":[],"mappings":"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","file":"main-es2015.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","module.exports = \"<canvas class=\\\"graph\\\" #graph width=\\\"1200\\\" height=\\\"1200\\\">\\n</canvas>\\n\\n<div *ngIf=\\\"progressValue !== 100\\\" class=\\\"progress-label\\\">\\n  <progress max=\\\"100\\\" [attr.value]=\\\"progressValue\\\"></progress>\\n  {{progressValue}}%\\n</div>\"","module.exports = __webpack_public_path__ + \"0-es2015.worker.js\"","module.exports = \":host {\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\nprogress {\\n  width: 500px;\\n  height: 20px;\\n  display: block;\\n}\\n\\n.graph {\\n  border: 1px solid #ccc;\\n  background: #002538;\\n}\\n\\n.progress-label {\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  flex-direction: column;\\n  font-size: 48px;\\n  font-weight: 600;\\n  color: #fafafa;\\n  font-family: Metropolis, \\\"Avenir Next\\\", \\\"Helvetica Neue\\\", Arial, sans-serif;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9uYWdhcnMvUGVyc29uYWwvZ2l0aHViL3J4aWZ5LXdvcmtlci1hbmd1bGFyL3NyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC9hcHAuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0Esc0JBQUE7QUNDRjs7QURDQTtFQUNFLFlBQUE7RUFDQSxZQUFBO0VBQ0EsY0FBQTtBQ0VGOztBREFBO0VBQ0Usc0JBQUE7RUFDQSxtQkFBQTtBQ0dGOztBREFBO0VBQ0Usa0JBQUE7RUFDQSxNQUFBO0VBQ0EsU0FBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7RUFDQSwyRUFBQTtBQ0dGIiwiZmlsZSI6InNyYy9hcHAvYXBwLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xufVxucHJvZ3Jlc3Mge1xuICB3aWR0aDogNTAwcHg7XG4gIGhlaWdodDogMjBweDtcbiAgZGlzcGxheTogYmxvY2s7XG59XG4uZ3JhcGgge1xuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICBiYWNrZ3JvdW5kOiAjMDAyNTM4O1xufVxuXG4ucHJvZ3Jlc3MtbGFiZWwge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGZvbnQtc2l6ZTogNDhweDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgY29sb3I6ICNmYWZhZmE7XG4gIGZvbnQtZmFtaWx5OiBNZXRyb3BvbGlzLFwiQXZlbmlyIE5leHRcIixcIkhlbHZldGljYSBOZXVlXCIsQXJpYWwsc2Fucy1zZXJpZjtcbn0iLCI6aG9zdCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG59XG5cbnByb2dyZXNzIHtcbiAgd2lkdGg6IDUwMHB4O1xuICBoZWlnaHQ6IDIwcHg7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4uZ3JhcGgge1xuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICBiYWNrZ3JvdW5kOiAjMDAyNTM4O1xufVxuXG4ucHJvZ3Jlc3MtbGFiZWwge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGZvbnQtc2l6ZTogNDhweDtcbiAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgY29sb3I6ICNmYWZhZmE7XG4gIGZvbnQtZmFtaWx5OiBNZXRyb3BvbGlzLCBcIkF2ZW5pciBOZXh0XCIsIFwiSGVsdmV0aWNhIE5ldWVcIiwgQXJpYWwsIHNhbnMtc2VyaWY7XG59Il19 */\"","import { Component, ElementRef, OnInit, ViewChild, OnDestroy } from '@angular/core';\n\nimport { DataLink, DataNode, GraphData } from './dto/dto';\nimport { RxifyWorker } from './worker-utils/rxify-worker';\nimport { Subscription } from 'rxjs';\nimport { ThrowStmt } from '@angular/compiler';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit, OnDestroy {\n  title = 'rxify-worker-angular';\n\n  @ViewChild('graph', { read: ElementRef, static: true })\n  graphEl: ElementRef;\n\n  graphData: GraphData = {\n    nodes: [],\n    links: [],\n    progress: 0\n  };\n\n  width = 1200;\n  height = 1200;\n\n  progressValue = 0;\n\n  subscription: Subscription;\n\n\n  ngOnInit() {\n    this.prepareData();\n    this.calculateLayout(this.graphData);\n  }\n\n  private calculateLayout(grpahData: GraphData) {\n    const rxify = new RxifyWorker(new Worker('./app.worker', { type: 'module' }));\n    this.subscription = rxify.sendMessage(this.graphData).subscribe((result: GraphData) => {\n      this.progressValue = result.progress;\n      if (result.progress === 100) {\n        this.drawGraph(result);\n      }\n    });\n  }\n\n  private prepareData() {\n    for (let i = 0; i < 3000; i++) {\n      this.graphData.nodes.push({ id: i, r: 3 });\n      const from = Math.round(Math.cbrt(i));\n      const to = i;\n      this.graphData.links.push({\n        source: this.graphData.nodes[from],\n        target: this.graphData.nodes[to]\n      });\n    }\n  }\n\n\n  private drawGraph(graphData: GraphData) {\n\n    const context: CanvasRenderingContext2D = (this.graphEl.nativeElement as HTMLCanvasElement).getContext('2d');\n    context.clearRect(0, 0, this.width, this.height);\n    context.save();\n    context.translate(this.width / 2, this.height / 2);\n    context.scale(0.4, 0.4);\n    context.beginPath();\n    graphData.nodes.forEach((d: DataNode) => {\n      context.moveTo(d.x + d.r, d.y);\n      context.arc(d.x, d.y, d.r, 0, 2 * Math.PI);\n    });\n    context.fillStyle = '#FF9C32';\n    context.fill();\n    context.strokeStyle = '#C25400';\n    context.stroke();\n\n    context.strokeStyle = '#DFA100';\n    context.beginPath();\n    graphData.links.forEach((d: DataLink) => {\n      const source: DataNode = (d.source as DataNode);\n      const target: DataNode = (d.target as DataNode);\n      context.moveTo(source.x, source.y);\n      context.lineTo(target.x, target.y);\n    });\n    context.stroke();\n\n    context.restore();\n\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n}\n\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Subject } from 'rxjs';\n\nexport interface WorkerMessage {\n  __messageId: string;\n  __messageType?: 'DATA' | 'COMPLETE';\n  userData: any;\n}\n\n/**\n * To Rxify a worker thread and make the web worker enjoyable.\n * Returns an observable for each message sent to worker.  The Oservable is automatically completed\n * if the thread completes the observable.\n * Multiple messages can be sent which with their own unique observable.\n *\n * ```ts\n * const rxify = new RxifyWorker(new Worker('...'));\n * rxify.sendMessage('hello').subscribe(msg => console.log(msg));\n * ```\n *\n */\nexport class RxifyWorker {\n  private callbackStack: { [key: string]: Subject<any> } = {};\n  private messageIndex = 0;\n\n  constructor(private worker: Worker) {\n\n    worker.addEventListener('message', (e: MessageEvent) => {\n      this.handleMessageEvent(e);\n    });\n\n  }\n\n  sendMessage(payload: any) {\n    const messageId = String(this.messageIndex++);\n    const messgageToSend: WorkerMessage = { __messageId: messageId, userData: payload };\n\n    const subject = new Subject();\n    this.callbackStack[messageId] = subject;\n\n    this.worker.postMessage(messgageToSend);\n\n    return subject.asObservable();\n  }\n\n\n  private handleMessageEvent(event: MessageEvent) {\n    const workerMessage: WorkerMessage = event.data;\n    const callback = this.callbackStack[workerMessage.__messageId];\n    // if no call back found, it might be a message from wrong window.\n    if (callback) {\n      if (workerMessage.__messageType === 'COMPLETE') {\n        callback.complete();\n      } else {\n        callback.next(workerMessage.userData);\n      }\n    }\n  }\n\n}\n\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}