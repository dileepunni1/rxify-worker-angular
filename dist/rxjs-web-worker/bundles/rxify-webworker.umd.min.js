!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs")):"function"==typeof define&&define.amd?define("rxify-webworker",["exports","rxjs"],t):t((e=e||self)["rxify-webworker"]={},e.rxjs)}(this,function(e,t){"use strict";var s=function(){return(s=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var n=function(){function e(e){var t=this;this.worker=e,this.callbackStack={},this.messageIndex=0,e.addEventListener("message",function(e){t.handleMessageEvent(e)})}return e.prototype.sendMessage=function(e){var s=String(this.messageIndex++),n={__messageId:s,userData:e},r=new t.Subject;return this.callbackStack[s]=r,this.worker.postMessage(n),r.asObservable()},e.prototype.handleMessageEvent=function(e){var t=e.data,s=this.callbackStack[t.__messageId];s&&("COMPLETE"===t.__messageType?s.complete():s.next(t.userData))},e}();var r=function(){function e(){this.handleIncomingMessages()}return e.prototype.handleMessages=function(e){this.handler=e},e.prototype.handleIncomingMessages=function(){var e=this;self.addEventListener("message",function(t){var n=t.data,r=n.userData;if(e.handler)e.handler.apply(e,[r]).subscribe(function(e){var t=s({},n,{__messageType:"DATA",userData:e});self.postMessage(t)},function(e){throw new Error(e)},function(){var e=s({},n,{__messageType:"COMPLETE"});self.postMessage(e)})})},e}();e.RegisterWorker=r,e.RxifyWorker=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=rxify-webworker.umd.min.js.map